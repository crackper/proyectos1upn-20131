@model IEnumerable<DBSystem.Entities.Producto>

@{
    ViewBag.Title = "Index";

    AjaxOptions ajaxopt = new AjaxOptions() 
    {
        UpdateTargetId = "listProductos"
    };
}

@section scripts{
    <script type="text/javascript">

        /*$(function () {
            $('#details').dialog({
                autoOpen:false,
                modal:true
            });
        });*/

        function OnSuccessDetails(data) {
            $('#frmDetails').dialog({
                modal: true,
                buttons: {
                    'Cerrar': function () {
                        $(this).dialog('close')
                    }
                },
                close: function () {
                    $(this).parent().remove();
                    $(this).remove();
                }
            });
        }

        function OnSuccessAdd(data) {
            $('#frmAdd').dialog({
                modal: true,
                width: 350,
                buttons: {
                    'Guardar': function () {
                        $("#frmCreate").submit();
                    },
                    'Cerrar': function () {
                        $(this).dialog('close');                        
                    }
                },
                close:function(){
                    $(this).parent().remove();
                    $(this).remove();
                }
            });
        }

        function OnSuccessCreate(data)
        {
            if (data.ok==true) {
                $('#frmAdd').dialog('close');
            }
        }
    </script>
}

<h2>Index</h2>

@using (Ajax.BeginForm("Index",ajaxopt))
{
    <fieldset>
        <legend>Buscar Producto</legend>
        <b>Criterio:</b>
        @Html.TextBox("criterio")
        <input type="submit" value="Buscar" />
    </fieldset>
    <div id="listProductos">
    @Html.Partial("_Productos", Model)
    </div>
}

<div id="details"></div>
<div id="add"></div>


